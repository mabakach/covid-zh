<!DOCTYPE html>
<html lang="de">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>COVID-19 Statistik Kanton ZÃ¼rich</title>
	<script src="./Chart.min.js"></script>
  </head>
  <body>
  	<canvas id="myChart" width="400" height="400"></canvas>
	<script>
		loadData = () => {
			fetch('./rest/v1/zurich/averageInfectionsPer100000Within14Days')
			  .then(response => response.json())
			  .then(data => drawChart(data));
		}
		
		drawChart = (data) => {
			var ctx = document.getElementById('myChart');
			const dateLabels = data.map(entry => entry.rangeEnd);
			const values = data.map(entry => entry.numberOfNewInfectionsPer100000);
			console.log(values);
	    	var myChart = new Chart(ctx, {
	    		type: 'bar',
	    		data: {
	    			labels: dateLabels,
	    			datasets: [{	    				
		    			data: values,
	    			}]
	    		}, 
	    		options: {
	    	        scales: {
	    	            yAxes: [{
	    	                ticks: {
	    	                    beginAtZero: true
	    	                }
	    	            }]
	    	        }
	    	    }
	    	});
		}
		
		document.addEventListener("DOMContentLoaded", loadData());
		
		
	</script>
  </body>
</html>